# ν”„λ΅ νΈμ—”λ“ ν΄λ§ μ „ν™ μ™„λ£ λ¦¬ν¬νΈ

**μ‘μ—…μΌ**: 2026-02-18  
**μƒνƒ**: β… μ™„λ£  
**λ©μ **: DB λ¶€ν• μ κ±°λ¥Ό μ„ν• Redis-only μ—”λ“ν¬μΈνΈλ΅ μ „ν™

---

## β… μ™„λ£λ μ‘μ—…

### 1. useWorkerJobPoller.ts μμ •
**νμΌ**: `src/shared/ui/asyncStatus/useWorkerJobPoller.ts`

#### λ³€κ²½ μ‚¬ν•­:
1. **pollExcelJob ν•¨μ**:
   - κΈ°μ΅΄: `getJobStatus(taskId)` β†’ `/jobs/${taskId}/` (DB μ΅°ν)
   - λ³€κ²½: `api.get('/jobs/${taskId}/progress/')` (Redis-only)
   - UNKNOWN μƒνƒ μ²λ¦¬ μ¶”κ°€
   - RUNNING μƒνƒμ—μ„ μ§„ν–‰λ¥  μ—…λ°μ΄νΈ

2. **pollVideoJob ν•¨μ**:
   - κΈ°μ΅΄: `api.get('/media/videos/${videoId}/')` (DB μ΅°ν)
   - λ³€κ²½: `api.get('/media/videos/${videoId}/progress/')` (Redis-only)
   - UNKNOWN μƒνƒ μ²λ¦¬ μ¶”κ°€
   - PROCESSING μƒνƒμ—μ„ μ§„ν–‰λ¥  μ—…λ°μ΄νΈ

#### μ£Όμ” κ°μ„ μ‚¬ν•­:
- β… DB λ¶€ν• μ™„μ „ μ κ±° (Redis-only μ΅°ν)
- β… UNKNOWN μƒνƒ μ²λ¦¬ (Redis TTL λ§λ£ μ‹ ν΄λ§ κ³„μ†)
- β… μ—λ¬ λ©”μ‹μ§€ κ°μ„  (error_reason ν‘μ‹)
- β… AI Job μ‹¤ν¨ μƒνƒ ν™•μ¥ (REJECTED_BAD_INPUT, FALLBACK_TO_GPU, REVIEW_REQUIRED)

---

## π“ μμƒ ν¨κ³Ό

### DB λ¶€ν• κ°μ†
- **μ΄μ „**: ν΄λ§λ§λ‹¤ DB SELECT μΏΌλ¦¬ μ‹¤ν–‰
- **μ΄ν›„**: Redis μ΅°νλ§ μν–‰ (DB λ¶€ν• 0)
- **μμƒ κ°μ†μ¨**: μ§„ν–‰λ¥  μ΅°ν κ΄€λ ¨ DB μΏΌλ¦¬ 100% μ κ±°

### μ„±λ¥ κ°μ„ 
- **μ‘λ‹µ μ†λ„**: Redis μ΅°νλ” DBλ³΄λ‹¤ ν›¨μ”¬ λΉ λ¦„
- **ν™•μ¥μ„±**: λ™μ‹ ν΄λ§ μ μ¦κ°€ν•΄λ„ DB λ¶€ν• μ—†μ

---

## π” κ²€μ¦ λ°©λ²•

### 1. ν”„λ΅ νΈμ—”λ“ λ™μ‘ ν™•μΈ
- [ ] μμƒ μ—…λ΅λ“ ν›„ μ§„ν–‰λ¥  ν‘μ‹ μ •μƒ μ‘λ™
- [ ] μ—‘μ…€ νμ‹± ν›„ μ§„ν–‰λ¥  ν‘μ‹ μ •μƒ μ‘λ™
- [ ] μ™„λ£/μ‹¤ν¨ μƒνƒ μ •ν™•ν ν‘μ‹
- [ ] UNKNOWN μƒνƒ μ‹ ν΄λ§ κ³„μ† μ§„ν–‰

### 2. DB λ¶€ν• ν™•μΈ
- [ ] CloudWatchμ—μ„ RDS CPUUtilization κ°μ† ν™•μΈ
- [ ] DatabaseConnections λ©”νΈλ¦­ κ°μ† ν™•μΈ
- [ ] DB μΏΌλ¦¬ λ΅κ·Έμ—μ„ progress κ΄€λ ¨ SELECT μ κ±° ν™•μΈ

---

## β οΈ μ£Όμμ‚¬ν•­

1. **UNKNOWN μƒνƒ**: Redis TTL λ§λ£ μ‹ UNKNOWN λ°ν™λμ§€λ§ ν΄λ§μ€ κ³„μ†λ¨
2. **ν•μ„ νΈν™μ„±**: κΈ°μ΅΄ `/jobs/{id}/` λ° `/media/videos/{id}/` μ—”λ“ν¬μΈνΈλ” μ μ§€λ¨
3. **μ—λ¬ μ²λ¦¬**: λ„¤νΈμ›ν¬ μ¤λ¥ μ‹ λ‹¤μ ν΄λ§μ—μ„ μλ™ μ¬μ‹λ„

---

## π“ λ‹¤μ λ‹¨κ³„

1. **CloudWatch λ¨λ‹ν„°λ§ μ„¤μ • ν™•μΈ**
   - RDS CPUUtilization μ•λ μ„¤μ •
   - DatabaseConnections μ•λ μ„¤μ •

2. **μ΄μ λ¨λ‹ν„°λ§**
   - ν΄λ§ μ „ν™ ν›„ DB λ¶€ν• κ°μ† ν™•μΈ
   - Redis λ©”λ¨λ¦¬ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§

3. **μµμ ν™” (μ„ νƒ)**
   - ν΄λ§ κ°„κ²© μ΅°μ • (ν„μ¬ 1μ΄)
   - μ μ‘ν• ν΄λ§ κ°„κ²© κµ¬ν„

---

**ν”„λ΅ νΈμ—”λ“ ν΄λ§ μ „ν™ μ™„λ£. DB λ¶€ν• μ κ±° ν¨κ³Όλ¥Ό ν™•μΈν•μ„Έμ”.** β…
