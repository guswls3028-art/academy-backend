
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>queue Code Browser</title>
<style>
body {
    background:#0f1115;
    color:#eaeaea;
    font-family:Consolas, monospace;
    padding:24px;
}
h1 { margin-bottom:24px; }
h2 { color:#7dd3fc; font-size:15px; }
pre {
    background:#111418;
    padding:16px;
    border-radius:8px;
    overflow-x:auto;
    font-size:13px;
    line-height:1.5;
}
section { margin-bottom:32px; }
</style>
</head>
<body>
<h1>ðŸ“¦ apps\worker\queue</h1>

        <section>
            <h2>__init__.py</h2>
            <pre><code></code></pre>
        </section>
        
        <section>
            <h2>consumer.py</h2>
            <pre><code>from shared.contracts.ai_job import AIJob
from shared.contracts.ai_result import AIResult

from apps.worker.ai.pipelines.dispatcher import handle_ai_job
from worker.queue.producer import publish_ai_result


def consume_ai_job(message: dict):
    &quot;&quot;&quot;
    Queue â†’ Worker
    &quot;&quot;&quot;
    job = AIJob(**message)

    result: AIResult = handle_ai_job(job)

    publish_ai_result(result)
</code></pre>
        </section>
        
        <section>
            <h2>producer.py</h2>
            <pre><code>from shared.contracts.ai_job import AIJob
from shared.contracts.ai_result import AIResult


def publish_ai_job(job: AIJob) -&gt; None:
    &quot;&quot;&quot;
    API â†’ Worker
    ì‹¤ì œë¡œëŠ” Redis/SQS/Kafka
    &quot;&quot;&quot;
    print(&quot;[QUEUE] publish job&quot;, job)


def publish_ai_result(result: AIResult) -&gt; None:
    &quot;&quot;&quot;
    Worker â†’ API
    &quot;&quot;&quot;
    print(&quot;[QUEUE] publish result&quot;, result)
</code></pre>
        </section>
        
        <section>
            <h2>retry_policy.py</h2>
            <pre><code></code></pre>
        </section>
        
</body>
</html>
