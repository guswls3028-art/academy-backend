# ==============================================================================
# 환경 변수 템플릿 (.env.example)
# ==============================================================================
# 사용법: .env.example을 복사하여 .env 파일 생성 후 값 입력
# ==============================================================================

# ==============================================================================
# Redis (상태/보호 레이어 - 선택적, 미설정 시 DB fallback)
# ==============================================================================
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==============================================================================
# Django 기본 설정
# ==============================================================================
SECRET_KEY=your-secret-key-change-in-production-min-50-chars
DEBUG=false
# API 서버: prod. Worker는 docker-compose에서 worker 설정 자동 적용
DJANGO_SETTINGS_MODULE=apps.api.config.settings.prod

# ==============================================================================
# Database 설정
# ==============================================================================
DB_NAME=academy_db
DB_USER=academy_user
DB_PASSWORD=your-database-password
DB_HOST=your-rds-endpoint.rds.amazonaws.com
DB_PORT=5432
DB_CONN_MAX_AGE=60

# ==============================================================================
# Cloudflare R2 Storage 설정
# ==============================================================================
R2_ACCESS_KEY=your-r2-access-key
R2_SECRET_KEY=your-r2-secret-key
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_PUBLIC_BASE_URL=https://pub-xxxxx.r2.dev
R2_AI_BUCKET=academy-ai
R2_VIDEO_BUCKET=academy-video
R2_PREFIX=media/hls/videos
R2_REGION=auto

# ==============================================================================
# CDN 설정
# ==============================================================================
CDN_HLS_BASE_URL=https://pub-54ae4dcb984d4491b08f6c57023a1621.r2.dev
CDN_HLS_SIGNING_SECRET=your-signing-secret-for-signed-urls
CDN_HLS_SIGNING_KEY_ID=v1

# ==============================================================================
# AWS SQS 설정
# ==============================================================================
AWS_REGION=ap-northeast-2
VIDEO_SQS_QUEUE_NAME=academy-video-jobs
AI_SQS_QUEUE_NAME_LITE=academy-ai-jobs-lite
AI_SQS_QUEUE_NAME_BASIC=academy-ai-jobs-basic
AI_SQS_QUEUE_NAME_PREMIUM=academy-ai-jobs-premium

# SQS Long Polling 설정 (비용 최적화)
SQS_WAIT_TIME_SECONDS=20

# ==============================================================================
# Worker 설정
# ==============================================================================
INTERNAL_WORKER_TOKEN=your-internal-worker-token-min-32-chars

# API 연결 (Worker용)
API_BASE_URL=https://api.hakwonplus.com

# Worker ID
VIDEO_WORKER_ID=video-worker-1
AI_WORKER_ID_CPU=ai-worker-cpu-1
AI_WORKER_ID_GPU=ai-worker-gpu-1

# EC2 Self-Stop 설정 (비용 최적화)
EC2_IDLE_STOP_THRESHOLD=5

# AI Worker 우선순위 설정
AI_WORKER_BASIC_POLL_WEIGHT=3
AI_WORKER_LITE_POLL_WEIGHT=1

# ==============================================================================
# Gunicorn 설정 (API 서버 확장성)
# ==============================================================================
GUNICORN_WORKERS=4
GUNICORN_WORKER_CONNECTIONS=1000

# ==============================================================================
# Video Worker 설정
# ==============================================================================
VIDEO_WORKER_TEMP_DIR=/tmp
FFMPEG_BIN=ffmpeg
FFPROBE_BIN=ffprobe
HLS_TIME_SECONDS=6
MIN_SEGMENTS_PER_VARIANT=3
THUMBNAIL_AT_SECONDS=5
UPLOAD_MAX_CONCURRENCY=4
RETRY_MAX_ATTEMPTS=5
BACKOFF_BASE_SECONDS=0.5
BACKOFF_CAP_SECONDS=10.0

# ==============================================================================
# Site 설정
# ==============================================================================
SITE_URL=https://hakwonplus.com

# ==============================================================================
# Solapi (SMS/LMS · 알림톡 템플릿 검수 신청) — 반드시 .env에만 설정, 코드/커밋 금지
# ==============================================================================
# 콘솔 https://console.solapi.com/credentials 에서 발급
SOLAPI_API_KEY=
SOLAPI_API_SECRET=
SOLAPI_SENDER=01012345678
# 워커 기본값용 (학원별 PFID는 앱 메시징 설정에서 테넌트마다 저장)
SOLAPI_KAKAO_PF_ID=
SOLAPI_KAKAO_TEMPLATE_ID=
MESSAGING_SQS_QUEUE_NAME=academy-messaging-jobs

# ==============================================================================
# Google Vision (선택사항)
# ==============================================================================
GOOGLE_APPLICATION_CREDENTIALS=/path/to/google-vision.json

# ==============================================================================
# 포트 설정 (Docker Compose용)
# ==============================================================================
API_PORT=8000
DB_PORT=5432
